## π“‹ κ°μ”

μ΄ ν”„λ΅μ νΈλ” FastMCP(Fast Model Context Protocol) λΌμ΄λΈλ¬λ¦¬λ¥Ό ν™μ©ν•μ—¬ **λ¦¬μ†μ¤(Resources) κΈ°λ¥**μ„ κµ¬ν„ν• μμ μ…λ‹λ‹¤. MCP μ„λ²„μ—μ„ λ‹¤μ–‘ν• ν•νƒμ λ°μ΄ν„° λ¦¬μ†μ¤λ¥Ό μ κ³µν•κ³ , ν΄λΌμ΄μ–ΈνΈκ°€ μ΄λ¥Ό μ΅°νν•κ³  μ½μ–΄μ¤λ” κΈ°λ³Έμ μΈ ν¨ν„΄μ„ ν•™μµν•  μ μμµλ‹λ‹¤. 

μ„λ²„λ” λ¬Έμμ—΄κ³Ό JSON ν•νƒμ λ‘ κ°€μ§€ λ¦¬μ†μ¤λ¥Ό μ κ³µν•λ©°, ν΄λΌμ΄μ–ΈνΈλ” HTTP μ—°κ²°μ„ ν†µν•΄ μ„λ²„μ— μ ‘μ†ν•μ—¬ μ‚¬μ© κ°€λ¥ν• λ¨λ“  λ¦¬μ†μ¤λ¥Ό λ‚μ—΄ν•κ³  κ°κ°μ λ‚΄μ©μ„ μ½μ–΄μµλ‹λ‹¤. FastMCPμ `@mcp.resource` λ°μ½”λ μ΄ν„°λ¥Ό μ‚¬μ©ν•μ—¬ ν•¨μλ¥Ό λ¦¬μ†μ¤λ΅ λ“±λ΅ν•λ” λ°©λ²•κ³Ό, ν΄λΌμ΄μ–ΈνΈμ—μ„ `list_resources()`μ™€ `read_resource()` λ©”μ„λ“λ¥Ό ν™μ©ν•λ” λ°©λ²•μ„ λ‹¤λ£Ήλ‹λ‹¤.

> π”— **μƒμ„Έ μ½”λ“ λ° μμ **: [https://github.com/yeounhak/mcp-python-best-practice/03-Server-Features/3-Resources][github-repo]

[github-repo]: https://github.com/yeounhak/mcp-python-best-practice/03-Server-Features/3-Resources

## π“ νμΌ κµ¬μ„±

```
3-Resources/
β”β”€β”€ server.py          # MCP μ„λ²„ κµ¬ν„ (λ¦¬μ†μ¤ μ κ³µ)
β””β”€β”€ client.py          # λ¦¬μ†μ¤λ¥Ό μ΅°νν•λ” ν΄λΌμ΄μ–ΈνΈ
```

### μ£Όμ” νμΌ μ„¤λ…

**server.py**

**1. λΌμ΄λΈλ¬λ¦¬ μ„ν¬νΈ λ° μ„λ²„ μ΄κΈ°ν™”**
```python
from fastmcp import FastMCP

mcp = FastMCP(name="DataServer")
```
- FastMCP λΌμ΄λΈλ¬λ¦¬λ¥Ό μ„ν¬νΈν•κ³  "DataServer"λΌλ” μ΄λ¦„μ MCP μ„λ²„ μΈμ¤ν„΄μ¤ μƒμ„±

**2. λ¬Έμμ—΄ λ¦¬μ†μ¤ μ κ³µ**
```python
@mcp.resource("resource://greeting")
def get_greeting() -> str:
    """κ°„λ‹¨ν• μΈμ‚¬ λ©”μ‹μ§€λ¥Ό μ κ³µν•©λ‹λ‹¤."""
    return "Hello from FastMCP Resources!"
```
- `@mcp.resource` λ°μ½”λ μ΄ν„°λ¥Ό μ‚¬μ©ν•μ—¬ ν•¨μλ¥Ό λ¦¬μ†μ¤λ΅ λ“±λ΅
- URI `resource://greeting`μΌλ΅ μ ‘κ·Ό κ°€λ¥ν• λ¬Έμμ—΄ λ¦¬μ†μ¤
- κ°„λ‹¨ν• μΈμ‚¬ λ©”μ‹μ§€λ¥Ό λ°ν™ν•λ” κΈ°λ³Έμ μΈ λ™μ  λ¦¬μ†μ¤

**3. JSON λ°μ΄ν„° λ¦¬μ†μ¤ μ κ³µ**
```python
@mcp.resource("data://config")
def get_config() -> dict:
    """JSON ν•νƒμ μ• ν”λ¦¬μΌ€μ΄μ… μ„¤μ •μ„ μ κ³µν•©λ‹λ‹¤."""
    return {
        "theme": "dark",
        "version": "1.2.0",
        "features": ["tools", "resources"],
    }
```
- λ”•μ…”λ„λ¦¬ ν•νƒμ λ°μ΄ν„°λ¥Ό λ°ν™ν•λ©΄ μλ™μΌλ΅ JSONμΌλ΅ μ§λ ¬ν™”λ¨
- URI `data://config`μΌλ΅ μ ‘κ·Ό κ°€λ¥ν• μ„¤μ • λ°μ΄ν„°
- μ• ν”λ¦¬μΌ€μ΄μ…μ ν…λ§, λ²„μ „, κΈ°λ¥ λ©λ΅ λ“±μ„ ν¬ν•¨ν• κµ¬μ„± μ •λ³΄

**4. μ„λ²„ μ‹¤ν–‰**
```python
mcp.run(
    transport="http",
    host="0.0.0.0",
    port=9000,
)
```
- HTTP ν”„λ΅ν† μ½μ„ ν†µν•΄ λ¨λ“  μΈν„°νμ΄μ¤(0.0.0.0)μ 9000λ² ν¬νΈμ—μ„ μ„λ²„ μ‹μ‘

**client.py**

**1. λΌμ΄λΈλ¬λ¦¬ μ„ν¬νΈ λ° λ©”μΈ ν•¨μ**
```python
from fastmcp import Client

async def main():
    async with Client("http://0.0.0.0:9000/mcp") as client:
```
- FastMCP Client ν΄λμ¤λ¥Ό μ„ν¬νΈ
- `async with` λ¬Έμ„ μ‚¬μ©ν•μ—¬ μ„λ²„μ™€μ μ—°κ²°μ„ μ•μ „ν•κ² κ΄€λ¦¬
- HTTP ν”„λ΅ν† μ½λ΅ μ„λ²„μ `/mcp` μ—”λ“ν¬μΈνΈμ— μ—°κ²°

**2. λ¦¬μ†μ¤ λ©λ΅ μ΅°ν λ° μ¶λ ¥**
```python
resources = await client.list_resources()
print(f"β… {len(resources)}κ°μ λ¦¬μ†μ¤λ¥Ό μ°Ύμ•μµλ‹λ‹¤.\n")
```
- `list_resources()` λ©”μ„λ“λ΅ μ„λ²„μ—μ„ μ κ³µν•λ” λ¨λ“  λ¦¬μ†μ¤ λ©λ΅ μ΅°ν
- μ°Ύμ€ λ¦¬μ†μ¤μ κ°μλ¥Ό μ‚¬μ©μμ—κ² ν‘μ‹

**3. κ° λ¦¬μ†μ¤ λ‚΄μ© μ½κΈ°**
```python
for i, resource in enumerate(resources, 1):
    print(f"\nπ“„ [{i}] Resource URI: {resource}")
    
    content = await client.read_resource(resource.uri)
    print(f"π“ Content: {content}")
```
- κ° λ¦¬μ†μ¤λ¥Ό μνν•λ©΄μ„ URIλ¥Ό μ¶λ ¥
- `read_resource()` λ©”μ„λ“λ΅ κ°λ³„ λ¦¬μ†μ¤μ μ‹¤μ  λ‚΄μ©μ„ μ½μ–΄μ΄
- λ¦¬μ†μ¤ λ²νΈ, URI, λ‚΄μ©μ„ μ²΄κ³„μ μΌλ΅ ν‘μ‹

**4. ν”„λ΅κ·Έλ¨ μ‹¤ν–‰**
```python
if __name__ == '__main__':
    import asyncio
    asyncio.run(main())
```
- μ¤ν¬λ¦½νΈκ°€ μ§μ ‘ μ‹¤ν–‰λ  λ• asyncioλ¥Ό ν†µν•΄ λ©”μΈ ν•¨μ μ‹¤ν–‰

## π€ μ‹¤ν–‰

### μ‚¬μ „ μ”κµ¬μ‚¬ν•­

1. **Python ν¨ν‚¤μ§€ μ„¤μΉ**
```bash
pip install fastmcp
```

2. **Python 3.7 μ΄μƒ**
- async/await λ¬Έλ²•κ³Ό asyncio λΌμ΄λΈλ¬λ¦¬ μ§€μ›μ„ μ„ν•΄ ν•„μ”

### μ‹¤ν–‰ λ°©λ²•

1. **MCP μ„λ²„ μ‹μ‘**
```bash
python server.py
```

2. **μƒ ν„°λ―Έλ„μ—μ„ ν΄λΌμ΄μ–ΈνΈ μ‹¤ν–‰**
```bash
python client.py
```

### μ‹¤ν–‰ κ²°κ³Ό

μ„λ²„λ¥Ό λ¨Όμ € μ‹¤ν–‰ν•λ©΄ λ‹¤μκ³Ό κ°™μ€ μ¶λ ¥μ΄ λ‚νƒ€λ‚©λ‹λ‹¤:

```bash
FastMCP server starting on http://0.0.0.0:9000
Server ready to accept connections...
```

μ΄ν›„ ν΄λΌμ΄μ–ΈνΈλ¥Ό μ‹¤ν–‰ν•λ©΄ λ‹¤μκ³Ό κ°™μ€ κ²°κ³Όλ¥Ό ν™•μΈν•  μ μμµλ‹λ‹¤:

```bash
β… 2κ°μ λ¦¬μ†μ¤λ¥Ό μ°Ύμ•μµλ‹λ‹¤.

π“„ [1] Resource URI: resource://greeting
π“ Content: Hello from FastMCP Resources!

π“„ [2] Resource URI: data://config
π“ Content: {'theme': 'dark', 'version': '1.2.0', 'features': ['tools', 'resources']}
```

μ„ κ²°κ³Όμ—μ„ ν™•μΈν•  μ μλ” λ‚΄μ©:

- **λ¦¬μ†μ¤ λ°κ²¬**: μ„λ²„μ—μ„ μ κ³µν•λ” 2κ°μ λ¦¬μ†μ¤κ°€ μ„±κ³µμ μΌλ΅ λ°κ²¬λ¨
- **λ¬Έμμ—΄ λ¦¬μ†μ¤**: `resource://greeting` URIλ΅ μ ‘κ·Όν• μ²« λ²μ§Έ λ¦¬μ†μ¤λ” κ°„λ‹¨ν• λ¬Έμμ—΄ λ©”μ‹μ§€ λ°ν™
- **JSON λ¦¬μ†μ¤**: `data://config` URIλ΅ μ ‘κ·Όν• λ‘ λ²μ§Έ λ¦¬μ†μ¤λ” λ”•μ…”λ„λ¦¬ ν•νƒμ μ„¤μ • λ°μ΄ν„°λ¥Ό JSONμΌλ΅ μ§λ ¬ν™”ν•μ—¬ λ°ν™
- **μλ™ μ§λ ¬ν™”**: μ„λ²„μ—μ„ λ°ν™ν• λ”•μ…”λ„λ¦¬κ°€ ν΄λΌμ΄μ–ΈνΈμ—μ„ μλ™μΌλ΅ μ μ ν• ν•νƒλ΅ λ³€ν™λ¨

## π“ μ •λ¦¬

μ΄ μμ λ” FastMCPμ λ¦¬μ†μ¤(Resources) κΈ°λ¥μ„ ν†µν•΄ μ„λ²„κ°€ ν΄λΌμ΄μ–ΈνΈμ—κ² λ‹¤μ–‘ν• ν•νƒμ λ°μ΄ν„°λ¥Ό μ κ³µν•λ” λ°©λ²•μ„ λ³΄μ—¬μ¤λ‹λ‹¤. `@mcp.resource` λ°μ½”λ μ΄ν„°λ¥Ό μ‚¬μ©ν•μ—¬ μΌλ° Python ν•¨μλ¥Ό MCP λ¦¬μ†μ¤λ΅ λ³€ν™ν•λ” κ³Όμ •μ΄ λ§¤μ° κ°„λ‹¨ν•λ©°, λ¬Έμμ—΄κ³Ό λ”•μ…”λ„λ¦¬ λ“± λ‹¤μ–‘ν• λ°μ΄ν„° νƒ€μ…μ„ μμ—°μ¤λ½κ² μ²λ¦¬ν•  μ μμμ„ ν™•μΈν–μµλ‹λ‹¤. ν΄λΌμ΄μ–ΈνΈ μΈ΅μ—μ„λ” `list_resources()`λ΅ μ‚¬μ© κ°€λ¥ν• λ¨λ“  λ¦¬μ†μ¤λ¥Ό μ΅°νν•κ³  `read_resource()`λ΅ κ°λ³„ λ¦¬μ†μ¤μ λ‚΄μ©μ„ μ½μ–΄μ¤λ” μ§κ΄€μ μΈ APIλ¥Ό μ κ³µν•©λ‹λ‹¤. μ΄λ¬ν• λ¦¬μ†μ¤ ν¨ν„΄μ€ μ„¤μ • νμΌ, λ°μ΄ν„°λ² μ΄μ¤ μΏΌλ¦¬ κ²°κ³Ό, μ‹¤μ‹κ°„ μƒνƒ μ •λ³΄ λ“±μ„ λ™μ μΌλ΅ μ κ³µν•λ” MCP μ• ν”λ¦¬μΌ€μ΄μ…μ„ κµ¬μ¶•ν•  λ• ν•µμ‹¬μ μΈ μ—­ν• μ„ ν•©λ‹λ‹¤. νΉν HTTP κΈ°λ°μ ν†µμ‹ μ„ ν†µν•΄ μ›κ²© μ„λ²„μ λ¦¬μ†μ¤μ— μ•μ „ν•κ² μ ‘κ·Όν•  μ μμ–΄, λ¶„μ‚° μ‹μ¤ν…μ΄λ‚ λ§μ΄ν¬λ΅μ„λΉ„μ¤ μ•„ν‚¤ν…μ²μ—μ„λ„ ν¨κ³Όμ μΌλ΅ ν™μ©ν•  μ μμµλ‹λ‹¤.