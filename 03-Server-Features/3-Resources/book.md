## π“‹ κ°μ”

μ΄ ν”„λ΅μ νΈλ” FastMCP(Fast Model Context Protocol) λΌμ΄λΈλ¬λ¦¬λ¥Ό ν™μ©ν•μ—¬ **λ¦¬μ†μ¤(Resources) κΈ°λ¥**μ„ κµ¬ν„ν• μμ μ…λ‹λ‹¤. MCP μ„λ²„μ—μ„ λ‹¤μ–‘ν• ν•νƒμ λ°μ΄ν„° λ¦¬μ†μ¤λ¥Ό μ κ³µν•κ³ , ν΄λΌμ΄μ–ΈνΈκ°€ μ΄λ¥Ό μ΅°νν•κ³  μ½μ–΄μ¤λ” κΈ°λ³Έμ μΈ ν¨ν„΄μ„ ν•™μµν•  μ μμµλ‹λ‹¤. 

μ„λ²„λ” λ¬Έμμ—΄κ³Ό JSON ν•νƒμ λ‘ κ°€μ§€ λ¦¬μ†μ¤λ¥Ό μ κ³µν•λ©°, ν΄λΌμ΄μ–ΈνΈλ” HTTP μ—°κ²°μ„ ν†µν•΄ μ„λ²„μ— μ ‘μ†ν•μ—¬ μ‚¬μ© κ°€λ¥ν• λ¨λ“  λ¦¬μ†μ¤λ¥Ό λ‚μ—΄ν•κ³  κ°κ°μ λ‚΄μ©μ„ μ½μ–΄μµλ‹λ‹¤. FastMCPμ `@mcp.resource` λ°μ½”λ μ΄ν„°λ¥Ό μ‚¬μ©ν•μ—¬ ν•¨μλ¥Ό λ¦¬μ†μ¤λ΅ λ“±λ΅ν•λ” λ°©λ²•κ³Ό, ν΄λΌμ΄μ–ΈνΈμ—μ„ `list_resources()`μ™€ `read_resource()` λ©”μ„λ“λ¥Ό ν™μ©ν•λ” λ°©λ²•μ„ λ‹¤λ£Ήλ‹λ‹¤.

> π”— **μƒμ„Έ μ½”λ“ λ° μμ **: [https://github.com/yeounhak/mcp-python-best-practice/03-Server-Features/3-Resources][github-repo]

[github-repo]: https://github.com/yeounhak/mcp-python-best-practice/03-Server-Features/3-Resources

## π” λ¦¬μ†μ¤μ™€ ν…ν”λ¦Ώ μ΄ν•΄ν•κΈ°

### λ¦¬μ†μ¤(Resources)λ€?

λ¦¬μ†μ¤λ” **MCP μ„λ²„κ°€ LLM/ν΄λΌμ΄μ–ΈνΈ μ• ν”λ¦¬μΌ€μ΄μ…μ—κ² μ½κΈ° μ „μ© λ°μ΄ν„° μ ‘κ·Όμ„ μ κ³µν•λ” λ©”μ»¤λ‹μ¦**μ…λ‹λ‹¤. λ„κµ¬(Tools)κ°€ νΉμ • μ‘μ—…μ„ μ‹¤ν–‰ν•λ” κ²ƒκ³Ό λ‹¬λ¦¬, λ¦¬μ†μ¤λ” μ„λ²„μ— μ €μ¥λ μ •λ³΄λ‚ λ™μ μΌλ΅ μƒμ„±λ λ°μ΄ν„°λ¥Ό μ΅°νν•  μ μκ² ν•΄μ¤λ‹λ‹¤.

### @resource λ°μ½”λ μ΄ν„°

**κ°€μ¥ μΌλ°μ μΈ λ¦¬μ†μ¤ μ •μ λ°©λ²•**μΌλ΅, ν•¨μλ¥Ό MCP λ¦¬μ†μ¤λ΅ λ³€ν™ν•©λ‹λ‹¤:

```python
@mcp.resource("resource://greeting")
def get_greeting() -> str:
    """κ°„λ‹¨ν• μΈμ‚¬ λ©”μ‹μ§€λ¥Ό μ κ³µν•©λ‹λ‹¤."""
    return "Hello from FastMCP Resources!"
```

### ν•µμ‹¬ κ°λ…

**1. URI (Uniform Resource Identifier)**
- `@resource`μ μ²« λ²μ§Έ μΈμλ” κ³ μ ν• URIμ…λ‹λ‹¤ (μ: `"resource://greeting"`)
- ν΄λΌμ΄μ–ΈνΈκ°€ λ¦¬μ†μ¤μ— μ ‘κ·Όν•  λ• μ‚¬μ©ν•λ” μ‹λ³„μ
- μΌκ΄€λ λ…λ… κ·μΉ™μ„ ν†µν•΄ λ¦¬μ†μ¤ κµ¬μ΅°λ¥Ό μ²΄κ³„ν™”

**2. μ§€μ—° λ΅λ”© (Lazy Loading)**
- λ¦¬μ†μ¤ ν•¨μλ” ν΄λΌμ΄μ–ΈνΈκ°€ `resources/read`λ¥Ό ν†µν•΄ μ‹¤μ  μ”μ²­ν•  λ•λ§ μ‹¤ν–‰λ©λ‹λ‹¤
- μ„λ²„ μ‹μ‘ μ‹μ μ΄ μ•„λ‹ ν•„μ” μ‹μ μ— λ°μ΄ν„°λ¥Ό μƒμ„±ν•μ—¬ μ„±λ¥ μµμ ν™”
- λ™μ  λ°μ΄ν„°λ‚ λΉ„μ©μ΄ ν° μ—°μ‚°μ— νΉν μ μ©

**3. λ©”νƒ€λ°μ΄ν„° μλ™ μ¶”λ΅ **
- λ¦¬μ†μ¤ μ΄λ¦„: ν•¨μλ…μ—μ„ μλ™μΌλ΅ μƒμ„± (`get_greeting` β†’ `greeting`)
- λ¦¬μ†μ¤ μ„¤λ…: ν•¨μμ λ…μ¤νΈλ§(docstring)μ—μ„ μλ™μΌλ΅ μ¶”μ¶
- λ³„λ„ μ„¤μ • μ—†μ΄λ„ ν΄λΌμ΄μ–ΈνΈμ—μ„ λ¦¬μ†μ¤ μ •λ³΄λ¥Ό ν™•μΈν•  μ μμ


## π“ νμΌ κµ¬μ„±

```
3-Resources/
β”β”€β”€ server.py          # MCP μ„λ²„ κµ¬ν„ (λ¦¬μ†μ¤ μ κ³µ)
β””β”€β”€ client.py          # λ¦¬μ†μ¤λ¥Ό μ΅°νν•λ” ν΄λΌμ΄μ–ΈνΈ
```

### μ£Όμ” νμΌ μ„¤λ…

**server.py**

**1. λΌμ΄λΈλ¬λ¦¬ μ„ν¬νΈ λ° μ„λ²„ μ΄κΈ°ν™”**
```python
from fastmcp import FastMCP

mcp = FastMCP(name="DataServer")
```
- FastMCP λΌμ΄λΈλ¬λ¦¬λ¥Ό μ„ν¬νΈν•κ³  "DataServer"λΌλ” μ΄λ¦„μ MCP μ„λ²„ μΈμ¤ν„΄μ¤ μƒμ„±

**2. λ¬Έμμ—΄ λ¦¬μ†μ¤ μ κ³µ**
```python
@mcp.resource("resource://greeting")
def get_greeting() -> str:
    """κ°„λ‹¨ν• μΈμ‚¬ λ©”μ‹μ§€λ¥Ό μ κ³µν•©λ‹λ‹¤."""
    return "Hello from FastMCP Resources!"
```
- `@mcp.resource` λ°μ½”λ μ΄ν„°λ¥Ό μ‚¬μ©ν•μ—¬ ν•¨μλ¥Ό λ¦¬μ†μ¤λ΅ λ“±λ΅
- URI `resource://greeting`μΌλ΅ μ ‘κ·Ό κ°€λ¥ν• λ¬Έμμ—΄ λ¦¬μ†μ¤
- **μ§€μ—° λ΅λ”© μ μ©**: ν΄λΌμ΄μ–ΈνΈκ°€ μ‹¤μ λ΅ μ”μ²­ν•  λ•κΉμ§€ ν•¨μκ°€ μ‹¤ν–‰λμ§€ μ•μ
- **λ©”νƒ€λ°μ΄ν„° μλ™ μ¶”λ΅ **: ν•¨μλ… `get_greeting`μ—μ„ λ¦¬μ†μ¤ μ΄λ¦„ `greeting` μλ™ μƒμ„±
- λ…μ¤νΈλ§μ΄ λ¦¬μ†μ¤ μ„¤λ…μΌλ΅ μλ™ μ„¤μ •λ¨

**3. JSON λ°μ΄ν„° λ¦¬μ†μ¤ μ κ³µ**
```python
@mcp.resource("data://config")
def get_config() -> dict:
    """JSON ν•νƒμ μ• ν”λ¦¬μΌ€μ΄μ… μ„¤μ •μ„ μ κ³µν•©λ‹λ‹¤."""
    return {
        "theme": "dark",
        "version": "1.2.0",
        "features": ["tools", "resources"],
    }
```
- **μλ™ JSON μ§λ ¬ν™”**: λ”•μ…”λ„λ¦¬ ν•νƒμ λ°μ΄ν„°λ¥Ό λ°ν™ν•λ©΄ μλ™μΌλ΅ JSONμΌλ΅ λ³€ν™
- URI `data://config`μΌλ΅ μ ‘κ·Ό κ°€λ¥ν• μ„¤μ • λ°μ΄ν„°
- **λ³µν•© λ°μ΄ν„° νƒ€μ… μ§€μ›**: λ¬Έμμ—΄, μ«μ, λ¦¬μ¤νΈκ°€ ν¬ν•¨λ λ³µμ΅ν• κµ¬μ΅°λ„ μ²λ¦¬ κ°€λ¥
- μ• ν”λ¦¬μΌ€μ΄μ…μ ν…λ§, λ²„μ „, κΈ°λ¥ λ©λ΅ λ“±μ„ ν¬ν•¨ν• κµ¬μ„± μ •λ³΄
- μ„¤μ • νμΌμ΄λ‚ ν™κ²½ λ³€μλ¥Ό λ™μ μΌλ΅ μ½μ–΄μ™€ μ κ³µν•λ” ν¨ν„΄μ— ν™μ© κ°€λ¥

**4. μ„λ²„ μ‹¤ν–‰**
```python
mcp.run(
    transport="http",
    host="0.0.0.0",
    port=9000,
)
```
- HTTP ν”„λ΅ν† μ½μ„ ν†µν•΄ λ¨λ“  μΈν„°νμ΄μ¤(0.0.0.0)μ 9000λ² ν¬νΈμ—μ„ μ„λ²„ μ‹μ‘

**client.py**

**1. λΌμ΄λΈλ¬λ¦¬ μ„ν¬νΈ λ° λ©”μΈ ν•¨μ**
```python
from fastmcp import Client

async def main():
    async with Client("http://0.0.0.0:9000/mcp") as client:
```
- FastMCP Client ν΄λμ¤λ¥Ό μ„ν¬νΈ
- `async with` λ¬Έμ„ μ‚¬μ©ν•μ—¬ μ„λ²„μ™€μ μ—°κ²°μ„ μ•μ „ν•κ² κ΄€λ¦¬
- HTTP ν”„λ΅ν† μ½λ΅ μ„λ²„μ `/mcp` μ—”λ“ν¬μΈνΈμ— μ—°κ²°

**2. λ¦¬μ†μ¤ λ©λ΅ μ΅°ν λ° μ¶λ ¥**
```python
resources = await client.list_resources()
print(f"β… {len(resources)}κ°μ λ¦¬μ†μ¤λ¥Ό μ°Ύμ•μµλ‹λ‹¤.\n")
```
- `list_resources()` λ©”μ„λ“λ΅ μ„λ²„μ—μ„ μ κ³µν•λ” λ¨λ“  λ¦¬μ†μ¤ λ©λ΅ μ΅°ν
- μ°Ύμ€ λ¦¬μ†μ¤μ κ°μλ¥Ό μ‚¬μ©μμ—κ² ν‘μ‹

**3. κ° λ¦¬μ†μ¤ λ‚΄μ© μ½κΈ°**
```python
for i, resource in enumerate(resources, 1):
    print(f"\nπ“„ [{i}] Resource URI: {resource}")
    
    content = await client.read_resource(resource.uri)
    print(f"π“ Content: {content}")
```
- κ° λ¦¬μ†μ¤λ¥Ό μνν•λ©΄μ„ URIλ¥Ό μ¶λ ¥
- `read_resource()` λ©”μ„λ“λ΅ κ°λ³„ λ¦¬μ†μ¤μ μ‹¤μ  λ‚΄μ©μ„ μ½μ–΄μ΄
- λ¦¬μ†μ¤ λ²νΈ, URI, λ‚΄μ©μ„ μ²΄κ³„μ μΌλ΅ ν‘μ‹

**4. ν”„λ΅κ·Έλ¨ μ‹¤ν–‰**
```python
if __name__ == '__main__':
    import asyncio
    asyncio.run(main())
```
- μ¤ν¬λ¦½νΈκ°€ μ§μ ‘ μ‹¤ν–‰λ  λ• asyncioλ¥Ό ν†µν•΄ λ©”μΈ ν•¨μ μ‹¤ν–‰

## π€ μ‹¤ν–‰

### μ‚¬μ „ μ”κµ¬μ‚¬ν•­

1. **Python ν¨ν‚¤μ§€ μ„¤μΉ**
```bash
pip install fastmcp
```

2. **Python 3.7 μ΄μƒ**
- async/await λ¬Έλ²•κ³Ό asyncio λΌμ΄λΈλ¬λ¦¬ μ§€μ›μ„ μ„ν•΄ ν•„μ”

### μ‹¤ν–‰ λ°©λ²•

1. **MCP μ„λ²„ μ‹μ‘**
```bash
python server.py
```

2. **μƒ ν„°λ―Έλ„μ—μ„ ν΄λΌμ΄μ–ΈνΈ μ‹¤ν–‰**
```bash
python client.py
```

### μ‹¤ν–‰ κ²°κ³Ό

μ„λ²„λ¥Ό λ¨Όμ € μ‹¤ν–‰ν•λ©΄ λ‹¤μκ³Ό κ°™μ€ μ¶λ ¥μ΄ λ‚νƒ€λ‚©λ‹λ‹¤:

```bash
FastMCP server starting on http://0.0.0.0:9000
Server ready to accept connections...
```

μ΄ν›„ ν΄λΌμ΄μ–ΈνΈλ¥Ό μ‹¤ν–‰ν•λ©΄ λ‹¤μκ³Ό κ°™μ€ κ²°κ³Όλ¥Ό ν™•μΈν•  μ μμµλ‹λ‹¤:

```bash
β… 2κ°μ λ¦¬μ†μ¤λ¥Ό μ°Ύμ•μµλ‹λ‹¤.

π“„ [1] Resource URI: resource://greeting
π“ Content: Hello from FastMCP Resources!

π“„ [2] Resource URI: data://config
π“ Content: {'theme': 'dark', 'version': '1.2.0', 'features': ['tools', 'resources']}
```

μ„ κ²°κ³Όμ—μ„ ν™•μΈν•  μ μλ” ν•µμ‹¬ κ°λ…λ“¤:

- **λ¦¬μ†μ¤ λ°κ²¬**: μ„λ²„μ—μ„ μ κ³µν•λ” 2κ°μ λ¦¬μ†μ¤κ°€ `list_resources()`λ¥Ό ν†µν•΄ μ„±κ³µμ μΌλ΅ λ°κ²¬λ¨
- **URI κΈ°λ° μ ‘κ·Ό**: κ° λ¦¬μ†μ¤κ°€ κ³ μ ν• URI(`resource://greeting`, `data://config`)λ΅ μ‹λ³„λ¨
- **μ§€μ—° λ΅λ”© μ‹¤μ¦**: `read_resource()` νΈμ¶ μ‹μ μ— μ„λ²„μ λ¦¬μ†μ¤ ν•¨μκ°€ μ‹¤ν–‰λμ–΄ λ°μ΄ν„° μƒμ„±
- **λ‹¤μ–‘ν• λ°μ΄ν„° νƒ€μ… μ§€μ›**: 
  - λ¬Έμμ—΄ λ¦¬μ†μ¤: `resource://greeting`μ—μ„ λ‹¨μ ν…μ¤νΈ λ°ν™
  - JSON λ¦¬μ†μ¤: `data://config`μ—μ„ λ³µν•© κµ¬μ΅° λ°μ΄ν„° λ°ν™
- **μλ™ μ§λ ¬ν™”**: μ„λ²„μ λ”•μ…”λ„λ¦¬κ°€ ν΄λΌμ΄μ–ΈνΈμ—μ„ μλ™μΌλ΅ μ μ ν• ν•νƒλ΅ λ³€ν™
- **λ©”νƒ€λ°μ΄ν„° ν™μ©**: ν΄λΌμ΄μ–ΈνΈκ°€ λ¦¬μ†μ¤μ URIμ™€ λ‚΄μ©μ„ λ¨λ‘ ν™•μΈν•  μ μμ–΄ λ™μ  νƒμƒ‰ κ°€λ¥

## π“ μ •λ¦¬

μ΄ μμ λ” FastMCPμ λ¦¬μ†μ¤(Resources) κΈ°λ¥μ„ ν†µν•΄ μ„λ²„κ°€ LLM/ν΄λΌμ΄μ–ΈνΈ μ• ν”λ¦¬μΌ€μ΄μ…μ—κ² μ½κΈ° μ „μ© λ°μ΄ν„° μ ‘κ·Όμ„ μ κ³µν•λ” ν•µμ‹¬ λ©”μ»¤λ‹μ¦μ„ λ³΄μ—¬μ¤λ‹λ‹¤. `@mcp.resource` λ°μ½”λ μ΄ν„°λ¥Ό μ‚¬μ©ν•μ—¬ μΌλ° Python ν•¨μλ¥Ό MCP λ¦¬μ†μ¤λ΅ λ³€ν™ν•λ” κ³Όμ •μ—μ„ URI κΈ°λ° μ‹λ³„, μ§€μ—° λ΅λ”©, λ©”νƒ€λ°μ΄ν„° μλ™ μ¶”λ΅  λ“±μ ν•µμ‹¬ κ°λ…λ“¤μ„ μ‹¤μ λ΅ κµ¬ν„ν–μµλ‹λ‹¤. νΉν μ§€μ—° λ΅λ”©μ„ ν†µν•΄ ν΄λΌμ΄μ–ΈνΈκ°€ μ‹¤μ λ΅ μ”μ²­ν•  λ•λ§ λ¦¬μ†μ¤ ν•¨μκ°€ μ‹¤ν–‰λμ–΄ μ„±λ¥μ„ μµμ ν™”ν•κ³ , ν•¨μλ…κ³Ό λ…μ¤νΈλ§μ—μ„ μλ™μΌλ΅ μ¶”λ΅ λλ” λ©”νƒ€λ°μ΄ν„°κ°€ ν΄λΌμ΄μ–ΈνΈμ λ™μ  νƒμƒ‰μ„ μ§€μ›ν•λ” κ²ƒμ„ ν™•μΈν•  μ μμµλ‹λ‹¤. ν…μ¤νΈμ™€ JSON λ°μ΄ν„° νƒ€μ…μ„ ν†µν•΄ λ‹¨μν• λ¬Έμμ—΄λ¶€ν„° λ³µμ΅ν• κµ¬μ΅°ν™”λ λ°μ΄ν„°κΉμ§€ μμ—°μ¤λ½κ² μ²λ¦¬ν•  μ μμΌλ©°, ν–¥ν›„ λ¦¬μ†μ¤ ν…ν”λ¦Ώμ„ ν™μ©ν•λ©΄ URI λ§¤κ°λ³€μλ¥Ό ν†µν• λ™μ  μ½ν…μΈ  μƒμ„±λ„ κ°€λ¥ν•©λ‹λ‹¤. μ΄λ¬ν• λ¦¬μ†μ¤ ν¨ν„΄μ€ μ„¤μ • κ΄€λ¦¬, λ°μ΄ν„°λ² μ΄μ¤ μΏΌλ¦¬, μ‹¤μ‹κ°„ λ¨λ‹ν„°λ§, API ν”„λ΅μ‹ λ“± λ‹¤μ–‘ν• μ‹λ‚λ¦¬μ¤μ—μ„ MCP μ„λ²„κ°€ κµ¬μ΅°ν™”λ μ •λ³΄λ¥Ό μ κ³µν•λ” ν•µμ‹¬ λ©”μ»¤λ‹μ¦μΌλ΅ ν™μ©λ©λ‹λ‹¤. HTTP κΈ°λ°μ μ•μ „ν• μ›κ²© μ ‘κ·Όμ„ ν†µν•΄ λ¶„μ‚° μ‹μ¤ν…κ³Ό λ§μ΄ν¬λ΅μ„λΉ„μ¤ μ•„ν‚¤ν…μ²μ—μ„λ„ μΌκ΄€λ λ°μ΄ν„° μ ‘κ·Ό μΈν„°νμ΄μ¤λ¥Ό μ κ³µν•  μ μμµλ‹λ‹¤.